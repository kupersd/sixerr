(this["webpackJsonpmister-toy"]=this["webpackJsonpmister-toy"]||[]).push([[0],{70:function(e,t,n){},71:function(e,t,n){},95:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n(0),o=n.n(a),c=n(29),s=n.n(c),i=n(15),u=n(16),l=n(18),p=n(17),d=(n(70),n(71),n(6)),j=n(21),h=n(22);var b=Object(j.b)((function(e){return{user:e.userModule.user}}))((function(e){var t=e.user;return Object(r.jsxs)("header",{className:"toy-header",children:[Object(r.jsxs)("h1",{children:["Welcome ",t?t.username:"Guest"]}),Object(r.jsxs)("nav",{children:[Object(r.jsx)(h.b,{to:"/toy",children:"See Toys"})," |",Object(r.jsx)(h.b,{to:"/profile",children:"Go to profile"})]})]})})),y=n(12),g=n.n(y),f=n(25),O=n(40),m=n.n(O),v=m.a.create({withCredentials:!0}),x={query:function(e){return A.apply(this,arguments)},deleteToy:function(e){return E.apply(this,arguments)},save:function(e){return w.apply(this,arguments)},getById:function(e){return C.apply(this,arguments)}},S="/api/toy";function A(){return(A=Object(f.a)(g.a.mark((function e(t){var n,r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),n=Object.keys(t).map((function(e){return"".concat(e,"=").concat(t[e])})).join("&"),e.prev=2,e.next=5,v.get("".concat(S,"/?").concat(n));case 5:return r=e.sent,e.abrupt("return",r.data);case 9:e.prev=9,e.t0=e.catch(2),console.log("Error in toy query",e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function C(){return(C=Object(f.a)(g.a.mark((function e(t){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.get("".concat(S,"/").concat(t));case 3:return n=e.sent,e.abrupt("return",n.data);case 7:e.prev=7,e.t0=e.catch(0),console.log("Error in get toy by ID",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function E(){return(E=Object(f.a)(g.a.mark((function e(t){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.delete("".concat(S,"/").concat(t));case 3:return n=e.sent,e.abrupt("return",n.data);case 7:e.prev=7,e.t0=e.catch(0),console.log("Error in Delete toy",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function w(){return(w=Object(f.a)(g.a.mark((function e(t){var n,r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t._id){e.next=13;break}return e.prev=1,e.next=4,v.put("".concat(S,"/").concat(t._id),t);case 4:return n=e.sent,e.abrupt("return",n.data);case 8:e.prev=8,e.t0=e.catch(1),console.log("Error in Update a toy",e.t0);case 11:e.next=23;break;case 13:return e.prev=13,e.next=16,v.post(S,t);case 16:return r=e.sent,e.abrupt("return",r.data);case 20:e.prev=20,e.t1=e.catch(13),console.log("Error in Creating a toy",e.t1);case 23:case"end":return e.stop()}}),e,null,[[1,8],[13,20]])})))).apply(this,arguments)}function T(){return function(e,t){var n=t().toyModule.filterBy;return x.query(n).then((function(t){e({type:"SET_TOYS",toys:t})}))}}function I(e){return x.getById(e)}var D=n(3);var k=m.a.create({withCredentials:!0}),U={query:function(){return R?Promise.resolve(R):k.get("".concat(N,"/5ff712a215a135781abb77b8")).then((function(e){return R=Object(D.a)({},e.data),e.data}))},login:function(e){return k.post("".concat(M,"/login"),e).then((function(e){return e.data})).then((function(e){return Y(e),e}))},logout:function(){return sessionStorage.clear(),k.post("".concat(M,"/logout")).then((function(e){return e.data}))},signup:function(e){return console.log(e),k.post("".concat(M,"/signup"),e).then((function(e){return e.data})).then((function(e){return Y(e),e}))},getLoggedinUser:function(){return JSON.parse(sessionStorage.getItem("loggedinUser"))},getByUsername:function(e){return k.get("".concat(N,"/").concat(e)).then((function(e){return e.data})).then((function(e){return console.log("user",e),e}))},updateUserActivities:function(e,t){},updateUserPreferences:function(e,t){}},R=null,N="/api/user",M="/api/auth";function Y(e){return sessionStorage.setItem("loggedinUser",JSON.stringify(e)),e}function B(){return function(e){return U.query().then((function(t){e({type:"SET_USER",user:t})}))}}function G(e,t){return function(n){return U.updateUserActivities(e,t).then((function(e){n({type:"UPDATE_ACTIVITIES",user:e})}))}}var P="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyVpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDYuMC1jMDAzIDc5LjE2NDUyNywgMjAyMC8xMC8xNS0xNzo0ODozMiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDIyLjEgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MEM1RERDN0QzRENEMTFFQkIxQkZDRUEzNEU3NDhCMjIiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MEM1RERDN0UzRENEMTFFQkIxQkZDRUEzNEU3NDhCMjIiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDowQzVEREM3QjNEQ0QxMUVCQjFCRkNFQTM0RTc0OEIyMiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDowQzVEREM3QzNEQ0QxMUVCQjFCRkNFQTM0RTc0OEIyMiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PtdTgt0AAAMdSURBVHja7FhNbtNAGJ1nG6lRW66AusBsOEQ3NIUVhXOQqhyiy0bANaDqDlE25QqouwjEGUjaTXEe44k9fxk7tuNWXXSUWIrHM/Pm+9573zggKe6qza6mkWwxBMR8Ps82N7fmdc9fX88i3CXALi0S97zde4BJl0FfTj8PLy5+vBKSHgAySan8IxRZfMYUfbu7u18PDt5+v3WAGpwQI4lOo6AIcxnFVY5RT7xpCbJSJKPD0UkeDtkdewtmcsSR/p2DrBQa1Qi1D/WcGIuKrXz88Ol9+wiyAEKDjjoqi0XL1ObLosynHgMDczHHEcsJXJTj9VKsJrSgAea26lJcXEQzFCF5gzlC2uBpczbuBhAYSw7kc8RW3PKWmcWZd8Xymzn78aPE5V0XM8bswsG7bLPpNNra3p7fSx+czqYRIoirq1nUiYOj0bsTFhzJFaytRVGKsS0b2ZXBoQI9PXuCR7V62/rgCDa/DEJjxoCxRXpScaTv4B/3YtSwlOuAhHBXpiNS02W5j05AQ+qvBggsWW9QlIUT+r3GKY0F4dYOC6RXwtyu3BGUK7CMGhz4dtSA3gBWzYraSNhVxT5EoKXKkwZBi5vuFqiAQIfM+kaTeaPViyKrUY4Hp1hcVZ9FSrnEXRblUQj2kWLJqbh6Kr/uWqCKC7wwtk1xO5GgsYY0SGpgKCZA/wBpVrNOLfWYbbrROpotZ6ePCGKtbq/40SlC/QBk+z2E3k/YBln7dxK0og9Cu2QFYddPMTxrprmPBuAQ6FBj0VeKacFiLfdQl/MOZ+PGNrOosQxkx0RRKxeoPuX0XerKSuIUeq96sXz9dPAw8ALaHmjjCAJ00odQLUVY9vSzbGWjj1rsAlO/UWNDrKcde+ZgksT/dLmyQwYrzYBbNVYKYsHRJElu1gaYpk8vqcVhTiql7cC3Gq4yfHMwTNP0cm2Ae3svzgaDwXHYeumcZxiMU0Aq8jPY2Dje3x+edv7zyG6///x6fP7t/PVkMnmeZVkkx0SCljJhW1H4zUi9uspL8ii5eZamP4cv9892nuz87QXgwz+sDwBvsf0XYACj+1YVBsKu8gAAAABJRU5ErkJggg==",z=n(117),V=n(115),Z=n(113),_=n(116),F=n(114),L=function(e){Object(l.a)(n,e);var t=Object(p.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var e=this.props,t=e.toy,n=e.onDelete,a=e.onDetails,o=e.onEdit,c=e.description;return Object(r.jsxs)(z.a,{style:{minWidth:275},variant:"outlined",children:[Object(r.jsxs)(Z.a,{children:[Object(r.jsx)(F.a,{variant:"h5",component:"h2",children:t.name}),Object(r.jsx)(F.a,{style:{marginBottom:12},color:"textSecondary",children:t.type}),Object(r.jsxs)(F.a,{variant:"body2",component:"p",children:["Price: $",t.price]}),Object(r.jsx)(F.a,{variant:"body2",component:"p",children:c})]}),Object(r.jsxs)(V.a,{children:[o&&Object(r.jsx)(_.a,{size:"small",onClick:o,children:"Edit"}),a&&Object(r.jsx)(_.a,{size:"small",onClick:a,children:"Details"}),n&&Object(r.jsx)(_.a,{size:"small",children:Object(r.jsx)("img",{onClick:function(){n(t)},src:P})})]})]})}}]),n}(o.a.Component);var Q=Object(d.f)((function(e){var t=e.toy,n=e.onDelete,a=e.loggedInUser,o=a.isAdmin?function(){e.history.push("/toy/edit/".concat(t._id))}:null,c=a.isAdmin?n:null;return Object(r.jsx)("article",{className:"toy-preview",children:Object(r.jsx)(L,{toy:t,onDelete:c,onDetails:function(){e.history.push("/toy/".concat(t._id))},onEdit:o})})}));function W(e){var t=e.toys,n=e.onDelete,a=e.loggedInUser;return Object(r.jsx)("ul",{className:"toy-list flex wrap clean-list",children:t.map((function(e){return Object(r.jsx)("li",{className:"toy",children:Object(r.jsx)(Q,{toy:e,onDelete:n,loggedInUser:a})},e._id)}))})}var X=n(31),J=function(e){Object(l.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={filterBy:{type:"all",text:""}},e.handleChange=function(t){var n=t.target,r=n.name,a=n.value;e.setState((function(e){return{filterBy:Object(D.a)(Object(D.a)({},e.filterBy),{},Object(X.a)({},r,a))}}),(function(){e.props.onSetFilter(e.state.filterBy)}))},e}return Object(u.a)(n,[{key:"render",value:function(){var e=this.state.filterBy.text;return Object(r.jsxs)("div",{className:"toy-filter",children:[Object(r.jsx)("h1",{children:"Filter:"}),Object(r.jsx)("input",{type:"text",name:"text",value:e,onChange:this.handleChange}),Object(r.jsxs)("select",{name:"type",onChange:this.handleChange,children:[Object(r.jsx)("option",{value:"all",children:"All"}),Object(r.jsx)("option",{value:"Adult",children:"Adult"}),Object(r.jsx)("option",{value:"Educational",children:"Educational"}),Object(r.jsx)("option",{value:"Funny",children:"Funny"})]})]})}}]),n}(o.a.Component),H=function(e){Object(l.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).onSetFilter=function(t){e.props.setFilter(t),e.props.loadToys()},e.onDelete=function(t){e.props.removeToy(t._id)},e.onSetBgc=function(t,n){e.props.setBgc(t,n)},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.props.loadToys()}},{key:"render",value:function(){var e=this.props.toys;return Object(r.jsxs)("section",{className:"toy-app",children:[Object(r.jsx)(h.b,{to:"/toy/edit",children:Object(r.jsx)(_.a,{variant:"contained",color:"primary",children:"Add Toy"})}),Object(r.jsx)(J,{onSetFilter:this.onSetFilter}),(e||!e.length)&&Object(r.jsx)(W,{toys:e,onSetBgc:this.onSetBgc,onDelete:this.onDelete,onToggleDone:this.onToggleDone,loggedInUser:this.props.user})]})}}]),n}(o.a.Component),K={loadToys:T,setFilter:function(e){return function(t){t({type:"FILTER_TOYS",filterBy:e})}},removeToy:function(e){return function(t){return x.deleteToy(e).then((function(){t({type:"REMOVE_TOY",toyId:e})}))}},setBgc:function(e,t){return e.bgc=t,function(t){return x.save(e).then((function(e){t({type:"SAVE_TOY",toy:e})}))}},updateUserActivities:G,loadUser:B},q=Object(j.b)((function(e){return{toys:e.toyModule.toys,filterBy:e.toyModule.filterBy,user:e.userModule.user}}),K)(H),$=n(30),ee={uploadImg:function(e){return te.apply(this,arguments)}};function te(){return(te=Object(f.a)(g.a.mark((function e(t){var n,r,a,o;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Dudi"),"dzocvtwca",n="https://api.cloudinary.com/v1_1/".concat("dzocvtwca","/image/upload"),(r=new FormData).append("file",t.target.files[0]),r.append("upload_preset","uploadPreset"),e.prev=6,e.next=9,fetch(n,{method:"POST",body:r});case 9:return a=e.sent,e.next=12,a.json();case 12:return o=e.sent,console.log(o),e.abrupt("return",o);case 17:e.prev=17,e.t0=e.catch(6),console.log(e.t0);case 20:case"end":return e.stop()}}),e,null,[[6,17]])})))).apply(this,arguments)}function ne(e){var t=e.toy,n=e.onSaveToy;return Object(r.jsxs)("div",{children:[Object(r.jsx)("h1",{children:"Any place in your app!"}),Object(r.jsx)($.d,{initialValues:t,validate:function(e){var t={};if(!e.name)return t.name="Name cannot be empty",e.price<1&&(t.price="Price must be set!"),t},onSubmit:function(e,t){var r=t.setSubmitting;setTimeout((function(){console.log(e),n(e),r(!1)}),400)},children:function(e){var t=e.isSubmitting;return Object(r.jsxs)($.c,{children:[Object(r.jsx)($.b,{type:"text",name:"name",placeholder:"Name"}),Object(r.jsx)($.a,{name:"name",className:"err-msg"}),Object(r.jsx)($.b,{type:"number",placeholder:"Price",name:"price"}),Object(r.jsx)($.a,{name:"price",className:"err-msg",component:"span"}),Object(r.jsxs)($.b,{as:"select",name:"type",children:[Object(r.jsx)("option",{value:"Adult",children:"Adult"}),Object(r.jsx)("option",{value:"Educational",children:"Educational"}),Object(r.jsx)("option",{value:"Funny",children:"Funny"})]}),Object(r.jsx)("label",{className:"pointer",htmlFor:"uploadImg",children:" Upload image"}),Object(r.jsx)("input",{onChange:ee.uploadImg,type:"file",id:"uploadImg",hidden:!0}),Object(r.jsx)("button",{type:"submit",disabled:t,children:"Submit"})]})}})]})}var re=function(e){Object(l.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={toy:{name:"",price:0,type:"Adult"}},e.onSaveToy=function(t){t._id?e.props.updateToy(t).then((function(){return e.props.history.push("/toy")})):e.props.addToy(t).then((function(){return e.props.history.push("/toy")})),e.setState({toy:{name:"",price:0}})},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.toyId;t&&I(t).then((function(t){return e.setState({toy:t})}))}},{key:"render",value:function(){var e=this.props.match.params.toyId,t=this.state.toy;return!t||e&&""===t.name?Object(r.jsx)("h1",{children:"Loading....."}):Object(r.jsx)("div",{children:Object(r.jsx)(ne,{toy:t,onSaveToy:this.onSaveToy})})}}]),n}(o.a.Component),ae={addToy:function(e){return function(t){return x.save(e).then((function(e){t({type:"ADD_TOY",toy:e})}))}},updateToy:function(e){return function(t){return x.save(e).then((function(e){t({type:"SAVE_TOY",toy:e})}))}},updateUserActivities:G},oe=Object(j.b)((function(e){return{toys:e.toyModule.toys}}),ae)(re),ce=function(e){Object(l.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={toy:{name:""}},e.getNextPrevToy=function(t){var n=e.props.toys,r=n.findIndex((function(e){return e._id===t}));return{prevToyId:r?n[r-1]._id:n[n.length-1]._id,nextToyId:r===n.length-1?n[0]._id:n[r+1]._id}},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.props.loadToys().then(this.loadToy())}},{key:"componentDidUpdate",value:function(e){e.match.params.toyId!==this.props.match.params.toyId&&this.loadToy()}},{key:"loadToy",value:function(){var e=this;I(this.props.match.params.toyId).then((function(t){return e.setState({toy:t})}))}},{key:"render",value:function(){var e=this.state.toy,t=this.props.toys;return console.log(e),e._id&&t.length?Object(r.jsxs)("div",{className:"details-container",children:[Object(r.jsx)(L,{className:"toy-details",toy:e,description:e.description}),Object(r.jsx)(h.b,{to:"/toy/".concat(this.getNextPrevToy(e._id).prevToyId),children:Object(r.jsx)(_.a,{variant:"contained",color:"primary",children:"Prev"})}),Object(r.jsx)(h.b,{to:"/toy/".concat(this.getNextPrevToy(e._id).nextToyId),children:Object(r.jsx)(_.a,{variant:"contained",color:"primary",children:"Next"})})]}):Object(r.jsx)("h1",{children:"Loading..."})}}]),n}(o.a.Component),se={loadToys:T},ie=Object(j.b)((function(e){return{toys:e.toyModule.toys}}),se)(ce),ue=function(e){Object(l.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={msg:"",loginCred:{username:"",password:""},signupCred:{username:"",password:"",fullname:""}},e.loginHandleChange=function(t){var n=t.target,r=n.name,a=n.value;e.setState((function(e){return{loginCred:Object(D.a)(Object(D.a)({},e.loginCred),{},Object(X.a)({},r,a))}}))},e.signupHandleChange=function(t){var n=t.target,r=n.name,a=n.value;e.setState((function(e){return{signupCred:Object(D.a)(Object(D.a)({},e.signupCred),{},Object(X.a)({},r,a))}}))},e.doLogin=function(){var t=Object(f.a)(g.a.mark((function t(n){var r;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),(r=e.state.loginCred).username&&r.password){t.next=4;break}return t.abrupt("return",e.setState({loginCred:{username:"",password:""},msg:"Please enter user/password"}));case 4:return t.prev=4,t.next=7,e.props.login(r);case 7:e.setState({loginCred:{username:"",password:""}},(function(){e.props.history.push("/toy")})),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(4),console.log("ERR",t.t0),e.setState((function(e){return{loginCred:Object(D.a)(Object(D.a)({},e.loginCred),{},{password:""}),msg:"Wrong username or password, please try again"}}));case 14:case"end":return t.stop()}}),t,null,[[4,10]])})));return function(e){return t.apply(this,arguments)}}(),e.doLogout=function(){e.props.logout()},e.doSignup=function(){var t=Object(f.a)(g.a.mark((function t(n){var r,a,o,c;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),r=e.state.signupCred,a=r.username,o=r.password,c=r.fullname,a&&o&&c){t.next=4;break}return t.abrupt("return",e.setState({msg:"All inputs are required"}));case 4:return t.prev=4,t.next=7,e.props.addUser({username:a,password:o,fullname:c});case 7:e.setState({signupCred:{username:"",password:"",fullname:""}},(function(){e.props.history.push("/toy")})),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(4),console.log("ERR",t.t0),e.setState((function(e){return{signupCred:Object(D.a)(Object(D.a)({},e.signupCred),{},{password:""}),msg:"Could not sign up please try again"}}));case 14:case"end":return t.stop()}}),t,null,[[4,10]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(u.a)(n,[{key:"render",value:function(){var e=this.props.user;console.log(e);var t=Object(r.jsxs)("form",{className:"frm",onSubmit:this.doSignup,children:[Object(r.jsx)("h2",{children:"Signup"}),Object(r.jsx)("input",{type:"text",name:"fullname",value:this.state.signupCred.fullname,onChange:this.signupHandleChange,placeholder:"Full name"}),Object(r.jsx)("input",{name:"password",type:"password",value:this.state.signupCred.password,onChange:this.signupHandleChange,placeholder:"Password"}),Object(r.jsx)("input",{type:"text",name:"username",value:this.state.signupCred.username,onChange:this.signupHandleChange,placeholder:"Username"}),Object(r.jsx)("br",{}),Object(r.jsx)("button",{children:"Signup"})]}),n=Object(r.jsxs)("form",{className:"frm",onSubmit:this.doLogin,children:[Object(r.jsx)("h2",{children:"Login"}),Object(r.jsx)("input",{type:"text",name:"username",value:this.state.loginCred.username,onChange:this.loginHandleChange,placeholder:"Username"}),Object(r.jsx)("br",{}),Object(r.jsx)("input",{type:"password",name:"password",value:this.state.loginCred.password,onChange:this.loginHandleChange,placeholder:"Password"}),Object(r.jsx)("br",{}),Object(r.jsx)("button",{children:"Login"})]});return Object(r.jsxs)("div",{className:"login",children:[Object(r.jsx)("h1",{children:"Login / Signup"}),Object(r.jsx)("p",{children:this.state.msg}),e&&Object(r.jsx)("div",{children:Object(r.jsxs)("h3",{children:["Welcome ",e.fullname,Object(r.jsx)("button",{onClick:this.doLogout,children:"Logout"})]})}),!e&&n,!e&&t]})}}]),n}(a.Component),le={login:function(e){return function(t){return U.login(e).then((function(e){t({type:"SET_USER",user:e})}))}},logout:function(){return function(e){return U.logout().then((function(){e({type:"SET_NO_USER"})}))}},addUser:function(e){return console.log(e),function(t){return U.signup(e).then((function(e){t({type:"SET_USER",user:e})}))}},loadUser:B},pe=[{path:"/toy/edit/:toyId?",component:oe},{path:"/toy/:toyId",component:ie},{path:"/toy",component:q},{path:"/profile",component:Object(j.b)((function(e){return{user:e.userModule.user}}),le)(ue)}],de=function(e){Object(l.a)(n,e);var t=Object(p.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return Object(r.jsxs)("main",{children:[Object(r.jsx)(b,{}),Object(r.jsx)("h1",{children:"My Toys"}),Object(r.jsx)(d.c,{children:pe.map((function(e){return Object(r.jsx)(d.a,{exact:!0,component:e.component,path:e.path},e.path)}))})]})}}]),n}(o.a.Component),je=n(61),he=n(32),be=n(62),ye={toys:[],filterBy:{type:"all",text:""}};var ge=null;sessionStorage.loggedinUser&&(ge=JSON.parse(sessionStorage.loggedinUser));var fe={user:ge};var Oe=Object(he.c)({toyModule:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ye,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_TOYS":return console.log("set",t),Object(D.a)(Object(D.a)({},e),{},{toys:t.toys});case"SAVE_TOY":return Object(D.a)(Object(D.a)({},e),{},{toys:e.toys.map((function(e){return e._id===t.toy._id?t.toy:e}))});case"ADD_TOY":return Object(D.a)(Object(D.a)({},e),{},{toys:[].concat(Object(be.a)(e.toys),[t.toy])});case"FILTER_TOYS":return Object(D.a)(Object(D.a)({},e),{},{filterBy:t.filterBy});case"REMOVE_TOY":return Object(D.a)(Object(D.a)({},e),{},{toys:e.toys.filter((function(e){return e._id!==t.toyId}))});default:return console.log("state"),e}},userModule:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER":return Object(D.a)(Object(D.a)({},e),{},{user:t.user});case"SET_NO_USER":return Object(D.a)(Object(D.a)({},e),{},{user:null});case"UPDATE_ACTIVITIES":return Object(D.a)(Object(D.a)({},e),{},{user:t.user});case"UPDATE_PREFS":return Object(D.a)(Object(D.a)({},e),{},{user:Object(D.a)(Object(D.a)({},e.user),{},{username:t.username,prefs:t.prefs})});default:return e}}}),me=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||he.d,ve=Object(he.e)(Oe,me(Object(he.a)(je.a)));s.a.render(Object(r.jsx)(o.a.StrictMode,{children:Object(r.jsx)(j.a,{store:ve,children:Object(r.jsx)(h.a,{children:Object(r.jsx)(de,{})})})}),document.getElementById("root"))}},[[95,1,2]]]);
//# sourceMappingURL=main.f2b4ac97.chunk.js.map